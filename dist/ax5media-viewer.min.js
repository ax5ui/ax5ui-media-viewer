"use strict";!function(i,e){var t=ax5.util,a=function(){var i;e&&e.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",animateTime:250,columnKeys:{url:"url",type:"type"},viewer:{prevHandle:!1,nextHandle:!1,ratio:16/9},media:{prevHandle:"<",nextHandle:">",width:36,height:36,list:[]}},this.openTimer=null,this.closeTimer=null,i=this.config;var a=function(i){return'\n                <div data-ax5-ui-media-viewer="{{id}}">\n                    <div data-media-viewer-els="viewer"></div>\n                    {{#media}}\n                    <div data-media-viewer-els="media-list-holder">\n                        <div data-media-viewer-els="media-list-prev-handle" style="width:{{width}}px;height:{{height}}px;">{{{prevHandle}}}</div>\n                        <div data-media-viewer-els="media-list">\n                            <div data-media-viewer-els="media-list-table">\n                            {{#list}}\n                                <div data-media-viewer-els="media-list-table-td">\n                                    {{#image}}\n                                    <div data-media-thumbnail="{{@i}}" style="width:{{width}}px;height:{{height}}px;">\n                                        <img src="{{poster}}" data-media-thumbnail-image="{{@i}}" />\n                                    </div>\n                                    {{/image}}\n                                    {{#video}}\n                                    <div data-media-thumbnail="{{@i}}" style="width:{{width}}px;height:{{height}}px;">\n                                        {{#poster}}<img src="{{.}}" data-media-thumbnail-video="{{@i}}" />>{{/poster}}\n                                        {{^poster}}<a data-media-thumbnail-video="{{@i}}" style="height:{{height}}px;">{{{media.poster}}}</a>{{/poster}}\n                                    </div>\n                                    {{/video}}\n                                </div>\n                            {{/list}}\n                            </div>\n                        </div>\n                        <div data-media-viewer-els="media-list-next-handle" style="width:{{width}}px;height:{{height}}px;">{{{nextHandle}}}</div>\n                    </div>\n                    {{/media}}\n                </div>\n                '},n=function(){var e=jQuery.extend(!0,{},i),t=a(i.columnKeys);e.id=this.id;try{return ax5.mustache.render(t,e)}finally{e=null,t=null}},d=function(){if(!(i.media&&i.media.list&&i.media.list.length>0))return!1;for(var e=i.media.list.length,t=0;e--;)if(i.media.list[e].selected){t=e;break}0==t&&(i.media.list[0].selected=!0);try{return t}finally{e=null,t=null}};this.init=function(){this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.id="ax5-media-viewer-"+ax5.getGuid(),i.target&&this.attach(i.target)},this.attach=function(i,e){return i||console.log(ax5.info.getError("ax5mediaViewer","401","setConfig")),"undefined"!=typeof e&&this.setConfig(e,!1),this.target=jQuery(i),this.target.html(n.call(this)),this.$={root:this.target.find("[data-ax5-ui-media-viewer]"),viewer:this.target.find('[data-media-viewer-els="viewer"]'),"list-holder":this.target.find('[data-media-viewer-els="media-list-holder"]'),"list-prev-handle":this.target.find('[data-media-viewer-els="media-list-prev-handle"]'),list:this.target.find('[data-media-viewer-els="media-list"]'),"list-next-handle":this.target.find('[data-media-viewer-els="media-list-next-handle"]')},this.align(),jQuery(window).bind("resize.ax5media-viewer",function(){this.align()}.bind(this)),this.select(d.call(this)),this},this.align=function(){return this.$.viewer.css({height:this.$.viewer.width()/i.viewer.ratio}),this},this.select=function(){return function(i){return this}}(),this.main=function(){arguments&&t.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};i.mediaViewer=function(){return t.isFunction(e)&&(a.prototype=new e),a}()}(ax5.ui,ax5.ui.root);